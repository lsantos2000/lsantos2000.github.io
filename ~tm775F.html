<!DOCTYPE html>
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Exercise 1.1 - Exploring the lab environment | workshops</title>
<meta name="generator" content="Jekyll v3.9.0">
<meta property="og:title" content="Exercise 1.1 - Exploring the lab environment">
<meta property="og:locale" content="en_US">
<meta name="description" content="Training Course for Ansible Automation Platform">
<meta property="og:description" content="Training Course for Ansible Automation Platform">
<link rel="canonical" href="https://ansible.github.io/workshops/exercises/ansible_security/1.1-explore/">
<meta property="og:url" content="https://ansible.github.io/workshops/exercises/ansible_security/1.1-explore/">
<meta property="og:site_name" content="workshops">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Exercise 1.1 - Exploring the lab environment">
<script type="application/ld+json">
{"description":"Training Course for Ansible Automation Platform","url":"https://ansible.github.io/workshops/exercises/ansible_security/1.1-explore/","@type":"WebPage","headline":"Exercise 1.1 - Exploring the lab environment","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="./styles/style.css">
    <script src="./scripts/scale.fix.js.download"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body ccID="1722">
    <div ccID="1734" class="wrapper">
    <header ccID="1761">
      <div ccID="1777" class="header-container">
        <a ccID="1817" href="https://redhat.com/" target=_new"><img ccID="1860" class="header-logo" src="./images/redhat-logo.svg" title="Red Hat" alt="Red Hat"></a> 
		<a ccID="1955" href="https://www.cgsinc.com/en/learning" target=_new"><img ccID="2013" class="header-logo" src="./images/cgsinc-logo.png" title="CGS Inc. Learning" alt="CGS Inc. Learning"></a> 
        <a ccID="2134" class="header-link" href="index.html">Workshops Home</a>
	  </div>
    </header>

      <section ccID="2229">
        <h1 ccID="2248" id="exercise-11---exploring-the-lab-environment">Exercise 1.1 - Exploring the lab environment</h1>

<h2 ccID="2354" id="objective">Objective</h2>

<p ccID="2391">The objective of this lab is to provide you an intro to using IBM QRadar and automating it with Ansible, and to give you a deeper understanding and hands on experience how to automate security tools used by security operators. For that we will tackle three security use cases rather typical for the day-to-day challenges of security operatos. While all of them will interact with roughly the same toolset, each use case shows a different perspective (security analyst, firewall operator, IDS specialist) and thus a different point of view on the available tools.</p>

<p ccID="2964">We have set up a common set of security related tools:</p>

<ul ccID="3029">
  <li ccID="3037">a Firewall, in this case <a ccID="3066" href="https://www.checkpoint.com/quantum/next-generation-firewall/">Check Point Next Generation Firewall</a></li>
  <li ccID="3186">a Security Information and Event Management (SIEM), here <a ccID="3247" href="https://www.ibm.com/security/security-intelligence/qradar">QRadar</a></li>
  <li ccID="3334">a Intrusion Detection & Prevention System, here <a ccID="3386" href="https://www.snort.org/">Snort</a></li>
</ul>
 
<p ccID="3445">We will automate the remediation of the incidents found by the tools above, using the <a ccID="3534" href="https://https://www.redhat.com/en/technologies/management/ansible/try-it">Read Hat Ansible Automation Platform</a>

<p ccID="3661">The exercises of the first section of this lab guide you through each individual solution mentioned above. You will learn how to access them, what they are used for and how to interact with them using Ansible.</p>

<p ccID="3881">The exercises of the second section of this lab are focused on the actual security operations use cases: situations in which a certain challenge has to be met, usually by interacting not only with one of the mentioned solutions above, but with a mix of them. After setting forth the challenge and explaining what tasks need to be done manually to solve the situation, the lab walks through the steps to automate the tasks with Ansible.</p>

<h2 ccID="4327" id="step-10---qradar">Step 1.1 - QRadar - Architecture of the QRadar SIEM</h2>

<p ccID="4413">In this lab you work in a pre-configured lab environment. You will have access to the following assets and versions</p>

<table ccID="4539">
  <thead ccID="4550">
    <tr ccID="4563">
      <th ccID="4575">Asset</th>
      <th ccID="4597">Version</th>
    </tr>
  </thead>
  <tbody ccID="4640">
    <tr ccID="4653">
      <td ccID="4665">IBM QRadar</td>
      <td ccID="4692">Community Edition (CE) v7.4</td>
  </tbody>
</table>

<h2 ccID="4754" id="step-111---qradar">Step 1.1.1 - QRadar side installation</h2>

<p ccID="4827">If you want to try QRadar in your own setup, install the limited Community Edition (CE) ova (using a virtual machine), or apply for a Cloud trial. 
You will be able to recreate this lab with the CE edition, the Cloud one only gives you access using a browser.</p>

<ul ccID="5098">
  <li ccID="5106"><a ccID="5110" href="https://www.ibm.com/community/qradar/ce/" target="_new">QRadar Community Edition (CE) Trial (limited events, etc)</a></li>
  <li ccID="5245"><a ccID="5249" href="https://www.ibm.com/account/reg/us-en/signup?formid=urx-30209">QRadar on Cloud Free Trial (full, limited time</a></li>
</ul> 

<h2 ccID="5388" id="step-12---architecture-of-the-lab-nodes-and-services">Step 1.2 - Ansible - Architecture of the lab, Nodes and Services</h2>

<p ccID="5523">When working with a pre-configured lab environment, you will have access to the following hosts and services:</p>

<table ccID="5643">
  <thead ccID="5654">
    <tr ccID="5667">
      <th ccID="5679">Role</th>
      <th ccID="5700">Inventory name</th>
    </tr>
  </thead>
  <tbody ccID="5750">
    <tr ccID="5763">
      <td ccID="5775">Ansible Control Host</td>
      <td ccID="5812">ansible</td>
    </tr>
    <tr ccID="5845">
      <td ccID="5857">IBM QRadar</td>
      <td ccID="5884">qradar</td>
    </tr>
    <tr ccID="5916">
      <td ccID="5928">Attacker</td>
      <td ccID="5953">attacker</td>
    </tr>
    <tr ccID="5987">
      <td ccID="5999">Snort</td>
      <td ccID="6021">snort</td>
    </tr>
    <tr ccID="6052">
      <td ccID="6064">Check Point Management Server</td>
      <td ccID="6110">checkpoint</td>
    </tr>
    <tr ccID="6146">
      <td ccID="6158">Check Point Gateway</td>
      <td ccID="6194">-</td>
    </tr>
    <tr ccID="6221">
      <td ccID="6233">Windows Workstation</td>
      <td ccID="6269">windows-ws</td>
    </tr>
  </tbody>
</table>

<p ccID="6325">The lab is set up individually for you. You have your own environment, own services, own virtual machines.</p>

<p ccID="6442"><img ccID="6445" src="./images/diagram.png" alt="Red Hat Ansible Security Workshop Pod"></p>

<p ccID="6529">For the exercises of section 2 we need to have security incidents. Those should happen on a <strong ccID="6624">target</strong> machine - that is Snort server. It is basically a RHEL installation with Snort installed and running a simplified web server to run attacks against.</p>

<h2 ccID="6804" id="step-13---access-the-ansible-environment">Step 1.3 - Access the Ansible Environment</h2>

<p ccID="6904">All automation is done from the Ansible control host, a Red Hat Enterprise Linux machine. To make access to the control host and managing files on it easier there is a online version of VS Code editor installed directly on the control host. This way it can be accessed via a normal web browser. Commands can be executed right from the terminal within the VS Code editor.</p>

<p ccID="7285">Let’s access the Visual Studio Code. Click on the link for VS Code access from the workshop page:</p>

<p ccID="7395"><img ccID="7398" src="./images/1-vscode-access.png" alt="VS Code Access"></p>

<p ccID="7467">At this point, you will see a <strong ccID="7500">Welcome</strong> page:</p>

<p ccID="7538"><img ccID="7541" src="./images/1-vscode-welcome-page.png" alt="VS Code - Welcome"></p>

<p ccID="7619">From within this environment, you can create and modify files or open a terminal and execute commands.</p>

<h2 ccID="7732" id="step-14---open-and-use-the-terminal-in-vs-code">Step 1.4 - Open and use the Terminal in VS Code</h2>

<p ccID="7844">So let’s open a new terminal in VS Code. In the menu bar, click on <strong ccID="7916">Terminal</strong> &gt; <strong ccID="7947">New Terminal</strong>.</p>

<p ccID="7985"><img ccID="7988" src="./images/1-vscode-new-terminal.png" alt="VS Code - New Terminal"></p>

<p ccID="8071">A new terminal will be opened in the lower part of your editor and you will be at the command prompt. Note that most prerequisite tasks have already been done for you:</p>

<ul ccID="8249">
  <li ccID="8257">
    <p ccID="8267">Ansible software is installed</p>
  </li>
  <li ccID="8316">
    <p ccID="8326">SSH connection and keys are configured</p>
  </li>
  <li ccID="8384">
    <p ccID="8394"><code ccID="8397" class="language-plaintext highlighter-rouge">sudo</code> has been configured on the managed hosts to run commands that require root privileges.</p>
  </li>
</ul>

<p ccID="8570">Note that each student is assigned a student number, i.e. X and you should work as the student <x ccID="8668"> user on the control node if not explicitly told differently.</x></p>

<p ccID="8744">Next, proceed to check that Ansible has been installed correctly.</p>

<div ccID="8820" class="language-bash highlighter-rouge"><div ccID="8865" class="highlight"><pre ccID="8888" class="highlight"><code ccID="8911">    <span ccID="8921" class="o">[</span>student&lt;X&gt;@ansible ~]<span ccID="8972" class="nv">$ </span>ansible <span ccID="9006" class="nt">--version</span>
</code></pre></div></div>

<p ccID="9070">The result should resemble the following:</p>

<p ccID="9122"><img ccID="9125" src="./images/1-vscode-check-ansible-version.png" alt="VS Code - Check Ansible Version"></p>

<blockquote ccID="9226">
  <p ccID="9242"><strong ccID="9245">Note</strong></p>

  <p ccID="9276">Ansible is keeping configuration management simple. Ansible requires no database or running daemons and can run easily on a laptop. On the managed hosts it needs no running agent.</p>
</blockquote>

<h2 ccID="9481" id="step-15---your-inventory">Step 1.5 - Your inventory</h2>

<p ccID="9549">Let’s open a file in VS Code. In the menu bar, click on <strong ccID="9610">File</strong>, <strong ccID="9633">Open File</strong>. In the middle of the screen, a drop down menu opens with the available file content of the home directory of your user:</p>

<p ccID="9788"><img ccID="9791" src="./images/1-vscode-filepicker.png" alt="VS Code - VS Code file picker"></p>

<p ccID="9879">Pick <strong ccID="9887">lab_inventory</strong>, this will immediately update the file list. In the new file list, pick <strong ccID="9990">hosts</strong>. This will open the inventory of your environment.</p>

<p ccID="10071">As you see, the inventory of your environment is provided in a static, ini-type file. It looks like the following listing. Please note that the IP addresses provided here are just an example and will be different in your lab environment:</p>

<div ccID="10319" class="language-ini highlighter-rouge"><div ccID="10363" class="highlight"><pre ccID="10386" class="highlight"><code ccID="10409"><span ccID="10415" class="nn">[all:vars]</span>
<span ccID="10451" class="py">ansible_user</span><span ccID="10487" class="p">=</span><span ccID="10511" class="s">student1</span>
<span ccID="10544" class="py">ansible_ssh_pass</span><span ccID="10584" class="p">=</span><span ccID="10608" class="s">ansible</span>
<span ccID="10640" class="py">ansible_port</span><span ccID="10676" class="p">=</span><span ccID="10700" class="s">22</span>

<span ccID="10729" class="nn">[attack]</span>
<span ccID="10763" class="err">attacker</span> <span ccID="10797" class="py">ansible_host</span><span ccID="10833" class="p">=</span><span ccID="10857" class="s">99.88.77.66 ansible_user=ec2-user private_ip=172.16.99.66 private_ip2=172.17.44.66</span>

<span ccID="10966" class="nn">[control]</span>
<span ccID="11001" class="err">ansible</span> <span ccID="11034" class="py">ansible_host</span><span ccID="11070" class="p">=</span><span ccID="11094" class="s">22.33.44.55 ansible_user=ec2-user private_ip=192.168.2.3</span>

<span ccID="11177" class="nn">[siem]</span>
<span ccID="11209" class="err">qradar</span> <span ccID="11241" class="py">ansible_host</span><span ccID="11277" class="p">=</span><span ccID="11301" class="s">22.44.55.77 ansible_user=admin private_ip=172.16.3.44 ansible_httpapi_pass="Ansible1!" ansible_connection=httpapi ansible_httpapi_use_ssl=yes ansible_httpapi_validate_certs=False ansible_network_os=ibm.qradar.qradar</span>

<span ccID="11543" class="nn">[ids]</span>
<span ccID="11574" class="err">snort</span> <span ccID="11605" class="py">ansible_host</span><span ccID="11641" class="p">=</span><span ccID="11665" class="s">33.44.55.66 ansible_user=ec2-user private_ip=192.168.3.4 private_ip2=172.17.33.77</span>

<span ccID="11773" class="nn">[firewall]</span>
<span ccID="11809" class="err">checkpoint</span> <span ccID="11845" class="py">ansible_host</span><span ccID="11881" class="p">=</span><span ccID="11905" class="s">44.55.66.77 ansible_user=admin private_ip=192.168.4.5 ansible_network_os=checkpoint ansible_connection=httpapi ansible_httpapi_use_ssl=yes ansible_httpapi_validate_certs=no</span>

<span ccID="12104" class="nn">[windows]</span>
<span ccID="12139" class="err">windows-ws</span> <span ccID="12175" class="py">ansible_host</span><span ccID="12211" class="p">=</span><span ccID="12235" class="s">55.66.77.88 ansible_user=Administrator ansible_pass=RedHat19! ansible_port=5986 ansible_connection=winrm ansible_winrm_server_cert_validation=ignore private_ip=192.168.5.6</span>
</code></pre></div></div>

<p ccID="12460">All the IP addresses are specific to your environment. Whenever the exercises ask you to access a certain machine, you can always look up the IP in the inventory on the control host.</p>

<p ccID="12653">Ansible is already configured to use the inventory specific to your environment. As shown in the example above, the inventory carries more than just the host names and IP addresses. Especially in the case of the Windows workstation, several more parameters are set.</p>

<blockquote ccID="12929">
  <p ccID="12945"><strong ccID="12948">Note</strong></p>

  <p ccID="12979">Not all hosts in your lab can be reached via SSH or WinRM. Some are accessed via REST API, RDP or web browser. During the exercises, each node type will be explained in detail and how to access the resources will be shown step by step.</p>
</blockquote>

<h2 ccID="13240" id="step-16---working-the-labs">Step 1.6 - Working the Labs</h2>

<p ccID="13312">You might have guessed by now this lab is pretty commandline-centric…? So we recommend that you don’t type everything manually, use copy &amp; paste from the browser when appropriate. But stop to think and understand.</p>

      </section>

    <footer ccID="13568">
      <div ccID="13584" class="footer-container">
        <a ccID="13624" href="https://redhat.com/"><img ccID="13654" class="footer-logo" src="./images/redhat-logo.svg" title="Red Hat" alt="Red Hat"></a>
		<a ccID="13748" href="https://www.cgsinc.com/en/learning" target=_new"><img ccID="13806" class="header-logo" src="./images/cgsinc-logo.png" title="CGS Inc. Learning" alt="CGS Inc. Learning"></a> 
        <a ccID="13927" class="header-link" href="index.html">Home</a>
				
        <p ccID="13992" class="footer-copyright">Copyright © 2020 Red Hat, Inc.</p>
        <div ccID="14065" class="footer-linkContainer">
          <a ccID="14111" href="https://www.redhat.com/en/about/privacy-policy" class="footer-link">Privacy statement</a> <span ccID="14210" class=
          "footer-linkSpacer">|</span> <a ccID="14263" href="https://www.ansible.com/security?hsLang=en-us" class="footer-link">Security disclosure</a>
          <span ccID="14374" class="footer-linkSpacer">|</span> <a ccID="14415" href="https://www.redhat.com/en/about/all-policies-guidelines" class="footer-link">All
          policies and guidelines</a>
        </div>
      </div>
    </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  

</body></html>